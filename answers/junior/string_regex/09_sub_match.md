# Что такое sub_match?

`std::sub_match` - это класс, который представляет собой подстроку, соответствующую группе в регулярном выражении. Он хранит итераторы на начало и конец совпадения, а также предоставляет методы для работы с найденной подстрокой.

## Основные характеристики:
- Хранит итераторы на начало и конец совпадения
- Может быть преобразован в строку
- Поддерживает сравнение с другими строками
- Предоставляет информацию о длине совпадения

## Примеры использования:

```cpp
// Правильное использование
std::regex pattern(R"((\d{3})-(\d{2})-(\d{4}))");
std::string text = "SSN: 123-45-6789";
std::smatch matches;

if (std::regex_search(text, matches, pattern)) {
    // Получение подстроки
    std::string full_match = matches[0].str();  // "123-45-6789"
    
    // Работа с группами
    std::string area = matches[1].str();    // "123"
    std::string group = matches[2].str();   // "45"
    std::string serial = matches[3].str();  // "6789"
    
    // Проверка длины
    size_t length = matches[0].length();  // 11
    
    // Проверка на совпадение
    if (matches[1] == "123") {
        std::cout << "Area code matches\n";
    }
    
    // Получение позиции совпадения
    size_t position = matches[0].first - text.begin();
}
```

## Как не стоит использовать:

```cpp
// Неправильное использование
std::regex pattern(R"((\d+))");
std::string text = "abc123def";
std::smatch matches;

// Ошибка: обращение к несуществующей группе
if (std::regex_search(text, matches, pattern)) {
    std::string invalid = matches[2].str();  // Ошибка: группа 2 не существует
}

// Небезопасное использование
std::string result = matches[0].str();
// Использование result после изменения исходной строки

// Неправильная работа с итераторами
std::string::const_iterator it = matches[0].first;
++it;  // Ошибка: изменение итератора может привести к неопределенному поведению
```

## Важные замечания:
1. `sub_match` не владеет данными, на которые указывает
2. Время жизни данных должно превышать время жизни `sub_match`
3. Группа 0 содержит полное совпадение
4. Группы нумеруются с 1
5. Можно использовать для проверки наличия совпадения

## Производительность:
- Создание `sub_match` не требует выделения памяти
- Преобразование в строку может быть дорогой операцией
- Доступ к итераторам эффективен
- Рекомендуется использовать `str()` только при необходимости 