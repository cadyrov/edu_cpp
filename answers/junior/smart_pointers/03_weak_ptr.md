# Что такое `weak_ptr`?

## Ответ
`weak_ptr` - это умный указатель, который не увеличивает счетчик ссылок объекта, на который указывает. Он используется для решения проблемы циклических ссылок и для безопасного доступа к объектам, которыми владеет `shared_ptr`. `weak_ptr` не может напрямую использоваться для доступа к объекту - сначала нужно получить `shared_ptr` через метод `lock()`.

## Примеры кода

### Правильное использование:
```cpp
// Создание shared_ptr и weak_ptr
std::shared_ptr<int> shared = std::make_shared<int>(42);
std::weak_ptr<int> weak = shared;

// Безопасное использование weak_ptr
if (auto locked = weak.lock()) {
    // Используем locked как shared_ptr
    *locked = 100;
}

// Использование в структуре для разрыва циклических ссылок
struct Node {
    std::shared_ptr<Node> next;
    std::weak_ptr<Node> prev; // Используем weak_ptr для обратной ссылки
};
```

### Неправильное использование:
```cpp
// Ошибка: нельзя напрямую использовать weak_ptr
std::weak_ptr<int> weak = std::make_shared<int>(42);
*weak; // Ошибка компиляции

// Ошибка: нельзя создать weak_ptr из unique_ptr
std::unique_ptr<int> unique = std::make_unique<int>(42);
std::weak_ptr<int> weak(unique); // Ошибка компиляции

// Ошибка: не проверяем результат lock()
std::weak_ptr<int> weak;
*weak.lock(); // Потенциально опасно, если weak_ptr не указывает на живой объект
```

## Комментарии
- `weak_ptr` не влияет на время жизни объекта
- Всегда проверяйте результат `lock()` перед использованием
- `weak_ptr` идеально подходит для разрыва циклических ссылок
- Нельзя создать `weak_ptr` из `unique_ptr`
- `weak_ptr` полезен для кэширования и наблюдения за объектами 