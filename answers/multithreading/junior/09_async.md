# Что такое `async`?

`std::async` - это функция, которая запускает асинхронную задачу и возвращает `std::future`, который будет содержать результат выполнения. Позволяет легко выполнять задачи асинхронно без явного управления потоками.

## Основные характеристики:
- Запускает задачу асинхронно
- Возвращает future с результатом
- Может запускать задачу в отдельном потоке или отложенно
- Поддерживает передачу исключений
- Автоматически управляет жизненным циклом потока

## Пример использования:

```cpp
#include <iostream>
#include <future>
#include <chrono>
#include <vector>

int calculate(int x) {
    std::this_thread::sleep_for(std::chrono::seconds(1));
    return x * x;
}

int main() {
    // Запускаем несколько асинхронных задач
    std::vector<std::future<int>> futures;
    
    for (int i = 0; i < 5; ++i) {
        // Запускаем задачу асинхронно
        futures.push_back(std::async(std::launch::async, calculate, i));
    }
    
    // Получаем результаты
    for (int i = 0; i < 5; ++i) {
        try {
            int result = futures[i].get();
            std::cout << "Result " << i << ": " << result << std::endl;
        } catch (const std::exception& e) {
            std::cout << "Exception: " << e.what() << std::endl;
        }
    }
    
    return 0;
}
```

## Как правильно использовать:
1. Используйте для простых асинхронных задач
2. Обрабатывайте исключения через future
3. Используйте wait_for/wait_until для таймаутов
4. Сохраняйте future до получения результата

## Как НЕ надо использовать:
```cpp
// ❌ Неправильно: Игнорирование future
std::async(std::launch::async, []() {
    // Длительная операция
    std::this_thread::sleep_for(std::chrono::seconds(1));
}); // future уничтожается, задача может быть отменена

// ❌ Неправильно: Слишком много одновременных задач
std::vector<std::future<void>> futures;
for (int i = 0; i < 1000; ++i) {
    futures.push_back(std::async(std::launch::async, []() {
        // Длительная операция
    }));
} // Создание слишком большого количества потоков

// ❌ Неправильно: Использование для длительных задач
std::async(std::launch::async, []() {
    while (true) {
        // Бесконечная задача
    }
}); // Лучше использовать thread pool
```

## Комментарии:
- async удобен для простых асинхронных задач
- Не используйте для длительных или бесконечных задач
- Помните о возможном создании большого количества потоков
- Для сложных сценариев лучше использовать thread pool 